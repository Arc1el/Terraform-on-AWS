# Terraform ì–¸ì–´ ë¬¸ë²•

ì†Œìœ ì: ìµëª…
ìµœì¢… í¸ì§‘ ì¼ì‹œ: 2023ë…„ 4ì›” 12ì¼ ì˜¤í›„ 12:51
íƒœê·¸: AWS, Terraform

## **Terraform ì–¸ì–´ ë¬¸ë²•**

### **Step-01: ì†Œê°œ**

- ê¸°ë³¸ì ì¸ Terraformì˜ ì‹ íƒìŠ¤ì— ëŒ€í•´ì„œ ì´í•´í•©ë‹ˆë‹¤
    - Blocks
    - Arguments, Attributes & Meta-Arguments
    - Identifiers
    - Comments

### **Step-02: Terraform ì„¤ì • ì–¸ì–´ ë¬¸ë²•**

```json
# í…œí”Œë¦¿
# ë¸”ë¡ë°”ë”” ì‹œì‘
<BLOCK TYPE> "<BLOCK LABEL>" "<BLOCK LABEL>"   {
  # ì•„ê·œë¨¼íŠ¸
  <IDENTIFIER> = <EXPRESSION>
}

# AWS ì˜ˆì‹œ
# ë¸”ë¡ ì‹œì‘
resource "aws_instance" "ec2demo" {
	# ì•„ê·œë¨¼íŠ¸
  ami           = "ami-04d29b6f966df1537"
	# Variable Value í‘œí˜„ì‹ì„ ê°€ì§„ ì•„ê·œë¨¼íŠ¸
	# Variable ValueëŠ” variables.tf íŒŒì¼ì—ì„œ ëŒ€ì²´ë˜ì–´ì§
  instance_type = var.instance_type
}
# ë¸”ë¡ ë
```

### **Step-03: Arguments, Attributes, Meta-Arguments ì´í•´**

- ArgumentsëŠ” `í•„ìˆ˜(required)` ì´ê±°ë‚˜ `ì„ íƒ(optional)`
- Attribues í¬ë§·ì€Â `resource_type.resource_name.attribute_name` ì™€ ê°™ì€ í˜•íƒœì´ì–´ì•¼ í•©ë‹ˆë‹¤.
- Meta-Arguments ëŠ” ë¦¬ì†ŒìŠ¤ íƒ€ì…ì˜ behavior (Example: count, for_each) ì— ë”°ë¼ ë°”ë€ë‹ˆë‹¤.
- ğŸ”—Â [Additional Reference](https://learn.hashicorp.com/tutorials/terraform/resource?in=terraform/configuration-language)
- ğŸ”—Â [Resource: AWS Instance](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance)
- ğŸ”—Â [Resource: AWS Instance Argument Reference](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance#argument-reference)
- ğŸ”—Â [Resource: AWS Instance Attribute Reference](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance#attributes-reference)
- ğŸ”—Â [Resource: Meta-Arguments](https://www.terraform.io/docs/language/meta-arguments/depends_on.html)

### **Step-04: Terraform Top-Level Blocks ì´í•´**

Terraformì—ì„œëŠ” ë‹¤ì–‘í•œ Top-Level Blockì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¸”ë¡ë“¤ì€ Terraform íŒŒì¼ì˜ ìµœìƒìœ„ ìˆ˜ì¤€ì— ìœ„ì¹˜í•˜ë©°, í…Œë¼í¼ ì½”ë“œë¥¼ ì •ì˜í•˜ê³  Terraformì˜ ë™ì‘ì„ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. 

- **Terraform Settings Block
`Terraform Settings Block`**ì€ í…Œë¼í¼ ì„¤ì •ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. **`required_providers`**ë¥¼ í¬í•¨í•˜ì—¬ AWS, GCP, Azure, DigitalOceanê³¼ ê°™ì€ ê³µê¸‰ì, ë°±ì—”ë“œ, ë²„ì „ ì œì–´ ë“±ê³¼ ê°™ì€ ì „ì—­ Terraform ì„¤ì •ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì˜µì…˜ì„ êµ¬ì„±í•˜ê³  í”„ë¡œì íŠ¸ì˜ êµ¬ì„±ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Provider Block
`Provider Block`**ì€ íŠ¹ì • ê³µê¸‰ì(ì˜ˆ: AWS, GCP ë“±)ì™€ ì—°ê²°ëœ ìì›ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ ë¸”ë¡ì€ ê³µê¸‰ìì™€ ìƒí˜¸ ì‘ìš©í•˜ê³  í”„ë¡œì íŠ¸ì˜ ìì›ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ ë¸”ë¡ì—ì„œëŠ” ì‚¬ìš©í•  ê³µê¸‰ìë¥¼ ì§€ì •í•˜ê³  AWS, Azure, GCPì™€ ê°™ì€ ê³µê¸‰ìì˜ ì¸ì¦ ì •ë³´(ì˜ˆ: API í‚¤, ë¹„ë°€ í‚¤)ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Resource Block
`Resource Block`**ì€ ì¸í”„ë¼ì˜ ê°œë³„ ë¦¬ì†ŒìŠ¤(ì˜ˆ: EC2 ì¸ìŠ¤í„´ìŠ¤, VPC, ì„œë¸Œë„· ë“±)ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ ë¸”ë¡ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ ìœ í˜•ê³¼ ì´ë¦„, ì†ì„±, íƒœê·¸ ë“±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡ì„ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ë¥¼ ìƒì„±, ê´€ë¦¬, ìˆ˜ì • ë° ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Input Variables Block
`Input Variables Block`**ì€ í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©í•  ë³€ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ë³€ìˆ˜ëŠ” Terraform íŒŒì¼ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° í…œí”Œë¦¿ì—ì„œ ê°’ì„ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë³€ìˆ˜ëŠ” í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ë° ë„ì›€ì´ ë˜ë©°, ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Output Values Block
`Output Values Block`**ì€ í…Œë¼í¼ ì‹¤í–‰ í›„ í‘œì‹œë˜ëŠ” ê°’(ì˜ˆ: IP ì£¼ì†Œ, ë¦¬ì†ŒìŠ¤ ì´ë¦„ ë“±)ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ ë¸”ë¡ì€ ë¦¬ì†ŒìŠ¤ì˜ ì¶œë ¥ì„ ì •ì˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡ì€ ë‹¤ë¥¸ Terraform ëª¨ë“ˆì—ì„œ ì¶œë ¥ëœ ê°’ì„ ì‚¬ìš©í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
- **Local Values Block
`Local Values Block`**ì€ ì§€ì—­ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ë¸”ë¡ì—ì„œëŠ” ë‹¤ë¥¸ ë¸”ë¡ì—ì„œ ì‚¬ìš©í•  ì§€ì—­ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ ë¸”ë¡ì—ì„œ ì‚¬ìš©í•  ê°’ì„ ê³„ì‚°í•˜ê³  ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Data Sources Block
`Data Sources Block`**ì€ ì¸í”„ë¼ì˜ ë°ì´í„°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ë¸”ë¡ì—ì„œëŠ” ì¸í”„ë¼ ìƒíƒœì˜ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ë¸”ë¡ì€ ì™¸ë¶€ ì‹œìŠ¤í…œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ë¸”ë¡ì—ì„œëŠ” ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ì˜ ìœ í˜•ê³¼ ìœ„ì¹˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Modules Block
`Modules Block`**ì€ Terraform ì½”ë“œë¥¼ ëª¨ë“ˆí™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ëª¨ë“ˆì€ ì¸í”„ë¼ì˜ ë™ì¼í•œ ìœ í˜•ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì—¬ëŸ¬ ë²ˆ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ë¸”ë¡ì—ì„œëŠ” ë‹¤ë¥¸ Terraform íŒŒì¼ì—ì„œ ëª¨ë“ˆë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ì™€ êµ¬ì„±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“ˆí™”ë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ ë° í™•ì¥ì„±ì„ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¸”ë¡ì„ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ë¥¼ ìƒì„±, ê´€ë¦¬ ë° ìˆ˜ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### References

[Overview - Configuration Language | Terraform | HashiCorp Developer](https://developer.hashicorp.com/terraform/language)

[Syntax - Configuration Language | Terraform | HashiCorp Developer](https://developer.hashicorp.com/terraform/language/syntax/configuration)